{"ast":null,"code":"import _objectWithoutProperties from\"C:/Users/samtest/Downloads/reporte-cambios---Copy/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"C:/Users/samtest/Downloads/reporte-cambios---Copy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const _excluded=[\"label\",\"name\"],_excluded2=[\"label\",\"name\",\"options\"],_excluded3=[\"id\"];/* global __firebase_config, __app_id, __initial_auth_token */import React,{useState,useEffect,useMemo}from\"react\";import{initializeApp}from\"firebase/app\";import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from\"firebase/auth\";import{getFirestore,collection,doc,addDoc,updateDoc,deleteDoc,onSnapshot,query}from\"firebase/firestore\";import{ArrowUpDown,Trash2,Edit,PlusCircle,X,Search,DollarSign,Calendar,Users,BarChart2,Briefcase,User,Banknote,BrainCircuit,FileText}from\"lucide-react\";// --- Configuración de Firebase ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const userProvidedConfig={apiKey:\"AIzaSyA7TPxMemR7F9qpU3kzPLRcC3K9lMZoEXc\",authDomain:\"mi-gestor-de-operaciones.firebaseapp.com\",projectId:\"mi-gestor-de-operaciones\",storageBucket:\"mi-gestor-de-operaciones.appspot.com\",messagingSenderId:\"1003121856869\",appId:\"1:1003121856869:web:2fec288ef83c8af586518c\",measurementId:\"G-F361D6HLFT\"};const firebaseConfig=typeof __firebase_config!==\"undefined\"&&__firebase_config?JSON.parse(__firebase_config):userProvidedConfig;const appId=typeof __app_id!==\"undefined\"?__app_id:\"default-registro-app-v6\";let app;let auth;let db;let firebaseInitialized=false;if(firebaseConfig&&firebaseConfig.apiKey){try{app=initializeApp(firebaseConfig);auth=getAuth(app);db=getFirestore(app);firebaseInitialized=true;}catch(error){console.error(\"Firebase initialization failed:\",error);firebaseInitialized=false;}}// --- Estilos y Helpers (sin cambios) ---\nconst styles={appContainer:{backgroundColor:\"#111827\",color:\"white\",minHeight:\"100vh\",fontFamily:\"sans-serif\",paddingBottom:\"80px\"},container:{maxWidth:\"1280px\",margin:\"0 auto\",padding:\"1rem\"},header:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",color:\"#7dd3fc\"},headerTitle:{display:\"flex\",alignItems:\"center\",gap:\"0.75rem\"},headerH1:{fontSize:\"1.875rem\",fontWeight:\"bold\"},card:{backgroundColor:\"#1f2937\",padding:\"1.25rem\",borderRadius:\"0.75rem\",boxShadow:\"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)\",border:\"1px solid #374151\"},statCard:{display:\"flex\",alignItems:\"center\",gap:\"1rem\"},statIcon:{padding:\"0.75rem\",borderRadius:\"9999px\",backgroundColor:\"#374151\"},statTextContainer:{display:\"flex\",flexDirection:\"column\"},statTitle:{fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#9ca3af\"},statValue:{fontSize:\"1.5rem\",fontWeight:\"bold\"},button:{display:\"inline-flex\",alignItems:\"center\",gap:\"0.5rem\",justifyContent:\"center\",padding:\"0.75rem 1rem\",fontWeight:\"bold\",color:\"white\",borderRadius:\"0.5rem\",border:\"none\",cursor:\"pointer\",transition:\"background-color 0.2s\"},buttonPrimary:{backgroundColor:\"#0284c7\"},buttonSecondary:{backgroundColor:\"#4b5563\"},table:{width:\"100%\",textAlign:\"left\",fontSize:\"0.875rem\"},th:{padding:\"0.75rem\",textTransform:\"uppercase\",color:\"#9ca3af\",backgroundColor:\"rgba(55, 65, 81, 0.5)\"},td:{padding:\"0.75rem\",borderBottom:\"1px solid #374151\"},modalOverlay:{position:\"fixed\",inset:\"0\",backgroundColor:\"rgba(0, 0, 0, 0.7)\",zIndex:50,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",padding:\"1rem\"},modalContent:{backgroundColor:\"#1f2937\",borderRadius:\"0.5rem\",boxShadow:\"0 10px 15px -3px rgba(0,0,0,0.1)\",width:\"100%\",maxWidth:\"640px\",maxHeight:\"90vh\",display:\"flex\",flexDirection:\"column\",border:\"1px solid #374151\"},modalHeader:{padding:\"1rem\",borderBottom:\"1px solid #374151\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",flexShrink:0},modalBody:{flexGrow:1,overflowY:\"auto\"},modalFooter:{padding:\"1rem\",borderTop:\"1px solid #374151\",display:\"flex\",justifyContent:\"flex-end\",gap:\"0.75rem\",flexShrink:0},formInput:{width:\"100%\",boxSizing:\"border-box\",backgroundColor:\"#374151\",border:\"1px solid #4b5563\",borderRadius:\"0.375rem\",padding:\"0.5rem 0.75rem\",color:\"white\",outline:\"none\"},formSelect:{width:\"100%\",boxSizing:\"border-box\",backgroundColor:\"#374151\",border:\"1px solid #4b5563\",borderRadius:\"0.375rem\",padding:\"0.5rem 0.75rem\",color:\"white\",outline:\"none\"},grid:{display:\"grid\",gap:\"1rem\"},gridCols1:{gridTemplateColumns:\"repeat(1, minmax(0, 1fr))\"},gridCols2:{gridTemplateColumns:\"repeat(2, minmax(0, 1fr))\"},gridCols3:{gridTemplateColumns:\"repeat(3, minmax(0, 1fr))\"},gridCols4:{gridTemplateColumns:\"repeat(4, minmax(0, 1fr))\"},textRight:{textAlign:\"right\"},fontMono:{fontFamily:\"monospace\"},textGreen:{color:\"#4ade80\"},textSky:{color:\"#38bdf8\"},textYellow:{color:\"#facc15\"},textIndigo:{color:\"#818cf8\"},icon:{width:\"24px\",height:\"24px\"}};const useWindowSize=()=>{const[windowSize,setWindowSize]=useState({width:undefined,height:undefined});useEffect(()=>{function handleResize(){setWindowSize({width:window.innerWidth,height:window.innerHeight});}window.addEventListener(\"resize\",handleResize);handleResize();return()=>window.removeEventListener(\"resize\",handleResize);},[]);return windowSize;};const Icon=_ref=>{let{name,style}=_ref;const icons={Banknote,DollarSign,ArrowUpDown,BarChart2,Briefcase,PlusCircle,FileText,BrainCircuit,Users,User,Edit,Trash2,X,Search};const LucideIcon=icons[name];if(!LucideIcon)return null;return/*#__PURE__*/_jsx(LucideIcon,{style:_objectSpread(_objectSpread({},styles.icon),style)});};const formatCurrency=function(value){let currency=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"USD\";const numericValue=Number(value);if(isNaN(numericValue))return currency===\"USD\"?\"$0.00\":\"Bs 0.00\";const options={style:\"currency\",minimumFractionDigits:2,maximumFractionDigits:2};if(currency===\"BRL\"){options.currency=\"BRL\";return new Intl.NumberFormat(\"pt-BR\",options).format(numericValue);}if(currency===\"VES\"){options.currency=\"VES\";return\"Bs \".concat(new Intl.NumberFormat(\"es-VE\",{minimumFractionDigits:2,maximumFractionDigits:2}).format(numericValue));}options.currency=\"USD\";return new Intl.NumberFormat(\"en-US\",options).format(numericValue);};const formatDate=date=>{if(!date)return\"N/A\";const d=date.toDate?date.toDate():new Date(date);if(isNaN(d.getTime()))return\"Fecha inválida\";return d.toLocaleDateString(\"es-VE\",{year:\"numeric\",month:\"2-digit\",day:\"2-digit\"});};const getLocalDateString=date=>{const y=date.getFullYear();const m=String(date.getMonth()+1).padStart(2,\"0\");const d=String(date.getDate()).padStart(2,\"0\");return\"\".concat(y,\"-\").concat(m,\"-\").concat(d);};const SUCURSALES=[\"Brasil\",\"Ecuador\",\"Peru\"];const ASIGNADOS={Brasil:[\"Charly\",\"Moises\",\"Daniela\",\"Liden\",\"Josef\",\"Luzmarys\",\"Leonel\",\"Giralbis\",\"Antonio\",\"Carolina\",\"Vanessa\",\"Francis\"],Ecuador:[\"Nathaly\"],Peru:[\"Wilyam\"]};const ALL_ASIGNADOS=[...new Set(Object.values(ASIGNADOS).flat())];const BANCOS=[\"Venezuela\",\"Banesco\",\"Provincial\",\"Mercantil\",\"BNC\",\"Pago Movil (Banesco)\",\"Pago Movil (Provincial)\",\"Pago Movil (Venezuela)\",\"Pago Movil (Mercantil)\",\"Pago Movil (BNC)\"];const MONEDAS=[\"BRL\",\"USD\",\"PEN\",\"EUR\",\"VES\"];const PAGO_MOVIL_COMMISSION_RATE=0.003;// --- INICIO DE COMPONENTES DE UI ---\nconst Header=()=>/*#__PURE__*/_jsx(\"header\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerTitle,children:[/*#__PURE__*/_jsx(Icon,{name:\"Banknote\"}),/*#__PURE__*/_jsx(\"h1\",{style:styles.headerH1,children:\"Gestor de Cambios\"})]})});const DashboardView=_ref2=>{let{stats,onAddNew}=_ref2;const{width}=useWindowSize();const isMobile=width<=768;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#d1d5db\"},children:\"Tu Resumen del D\\xEDa\"}),!isMobile&&/*#__PURE__*/_jsxs(\"button\",{onClick:onAddNew,style:_objectSpread(_objectSpread({},styles.button),styles.buttonPrimary),children:[/*#__PURE__*/_jsx(Icon,{name:\"PlusCircle\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Nueva Operaci\\xF3n\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols3),children:[/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"DollarSign\",style:{color:\"#4ade80\"}}),title:\"Mi Ganancia Hoy\",value:formatCurrency(stats.myTotalGanancia)}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"ArrowUpDown\",style:{color:\"#38bdf8\"}}),title:\"Total Transado (USD)\",value:formatCurrency(stats.totalMovidoUSD)}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"BarChart2\",style:{color:\"#facc15\"}}),title:\"Operaciones\",value:stats.count})]})]});};const ResultsTable=_ref3=>{let{operations,loading,onEdit,onDelete}=_ref3;if(loading)return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",padding:\"2.5rem\"},children:/*#__PURE__*/_jsx(\"p\",{children:\"Cargando datos...\"})});if(operations.length===0)return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",padding:\"2.5rem\"},children:/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\"},children:\"No hay operaciones registradas\"})});return/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Asignado\"}),/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.th),styles.textRight),children:\"Monto\"}),/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.th),styles.textRight),children:\"Mi Ganancia\"}),/*#__PURE__*/_jsx(\"th\",{style:_objectSpread(_objectSpread({},styles.th),{},{textAlign:\"center\"}),children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:operations.map(op=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #374151\"},children:[/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:formatDate(op.fecha)}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.td),{},{fontWeight:\"500\"}),children:op.asignado}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.td),styles.fontMono),styles.textRight),children:formatCurrency(op.monto,op.moneda)}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},styles.td),styles.fontMono),styles.textRight),styles.textGreen),{},{fontWeight:\"600\"}),children:formatCurrency(op.gananciaMia)}),/*#__PURE__*/_jsx(\"td\",{style:_objectSpread(_objectSpread({},styles.td),{},{textAlign:\"center\"}),children:onEdit&&onDelete&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onEdit(op),style:{background:\"none\",border:\"none\",cursor:\"pointer\",padding:\"0.5rem\",color:\"#38bdf8\"},children:/*#__PURE__*/_jsx(Icon,{name:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(op.id),style:{background:\"none\",border:\"none\",cursor:\"pointer\",padding:\"0.5rem\",color:\"#f87171\"},children:/*#__PURE__*/_jsx(Icon,{name:\"Trash2\"})})]})})]},op.id))})]})});};const OperationsListView=_ref4=>{let{operations,onEdit,onDelete,loading,onAddNew}=_ref4;const[searchTerm,setSearchTerm]=useState(\"\");const{width}=useWindowSize();const isMobile=width<=768;const filteredOperations=useMemo(()=>{if(!searchTerm)return operations;return operations.filter(op=>{var _op$asignado,_op$sucursal;return(((_op$asignado=op.asignado)===null||_op$asignado===void 0?void 0:_op$asignado.toLowerCase())||\"\").includes(searchTerm.toLowerCase())||(((_op$sucursal=op.sucursal)===null||_op$sucursal===void 0?void 0:_op$sucursal.toLowerCase())||\"\").includes(searchTerm.toLowerCase());});},[operations,searchTerm]);return/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:\"1rem\",flexDirection:isMobile?\"column\":\"row\",gap:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#e5e7eb\"},children:\"Historial de Operaciones\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"1rem\",width:isMobile?\"100%\":\"auto\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:_objectSpread(_objectSpread({},styles.formInput),{},{flexGrow:1})}),!isMobile&&/*#__PURE__*/_jsxs(\"button\",{onClick:onAddNew,style:_objectSpread(_objectSpread({},styles.button),styles.buttonPrimary),children:[/*#__PURE__*/_jsx(Icon,{name:\"PlusCircle\"}),/*#__PURE__*/_jsx(\"span\",{children:\"A\\xF1adir\"})]})]})]}),/*#__PURE__*/_jsx(ResultsTable,{operations:filteredOperations,loading:loading,onEdit:onEdit,onDelete:onDelete})]});};const ReportsView=_ref5=>{let{allOperations}=_ref5;const today=new Date();const firstDayOfMonth=new Date(today.getFullYear(),today.getMonth(),1);const{width}=useWindowSize();const isMobile=width<=768;const[filters,setFilters]=useState({startDate:getLocalDateString(firstDayOfMonth),endDate:getLocalDateString(today),asignado:\"Todos\"});const[reportData,setReportData]=useState(null);const handleFilterChange=e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));const handleGenerateReport=()=>{const{startDate,endDate,asignado}=filters;const start=new Date(startDate+\"T00:00:00\");const end=new Date(endDate+\"T23:59:59\");const filteredOps=allOperations.filter(op=>{const opDate=op.fecha;return opDate>=start&&opDate<=end&&(asignado===\"Todos\"||op.asignado===asignado);});const totals=filteredOps.reduce((acc,op)=>{acc.gananciaMia+=Number(op.gananciaMia)||0;acc.gananciaAsignado+=Number(op.gananciaAsignado)||0;acc.gananciaCharly+=Number(op.gananciaCharly)||0;acc.gananciaNetaUSD+=Number(op.gananciaNetaUSD)||0;return acc;},{gananciaMia:0,gananciaAsignado:0,gananciaCharly:0,gananciaNetaUSD:0});setReportData({ops:filteredOps,totals:totals});};return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#e5e7eb\",marginBottom:\"1rem\"},children:\"Generador de Reportes\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols4),children:[/*#__PURE__*/_jsx(FormInput,{label:\"Desde\",type:\"date\",name:\"startDate\",value:filters.startDate,onChange:handleFilterChange}),/*#__PURE__*/_jsx(FormInput,{label:\"Hasta\",type:\"date\",name:\"endDate\",value:filters.endDate,onChange:handleFilterChange}),/*#__PURE__*/_jsx(FormSelect,{label:\"Asignado\",name:\"asignado\",value:filters.asignado,onChange:handleFilterChange,options:[\"Todos\",...ALL_ASIGNADOS]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateReport,style:_objectSpread(_objectSpread(_objectSpread({},styles.button),styles.buttonPrimary),{},{alignSelf:\"flex-end\",height:\"38px\"}),children:\"Generar\"})]})]}),reportData&&/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#7dd3fc\",marginBottom:\"1rem\"},children:\"Resultados del Reporte\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols4),{},{marginBottom:\"1.5rem\"}),children:[/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"DollarSign\",style:styles.textGreen}),title:\"Mi Ganancia\",value:formatCurrency(reportData.totals.gananciaMia)}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"Users\",style:styles.textYellow}),title:\"Ganancia Asignado(s)\",value:formatCurrency(reportData.totals.gananciaAsignado)}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"User\",style:styles.textIndigo}),title:\"Ganancia Charly\",value:formatCurrency(reportData.totals.gananciaCharly)}),/*#__PURE__*/_jsx(StatCard,{icon:/*#__PURE__*/_jsx(Icon,{name:\"BarChart2\",style:styles.textSky}),title:\"Ganancia Neta Total\",value:formatCurrency(reportData.totals.gananciaNetaUSD)})]}),/*#__PURE__*/_jsx(ResultsTable,{operations:reportData.ops,loading:false})]})]});};const AnalysisView=_ref6=>{let{onGetAnalysis,result,isLoading}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#e5e7eb\",marginBottom:\"1rem\"},children:\"An\\xE1lisis con IA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onGetAnalysis,disabled:isLoading,style:_objectSpread(_objectSpread({},styles.button),styles.buttonPrimary),children:isLoading?\"Analizando...\":\"✨ Analizar último mes\"})]}),result&&/*#__PURE__*/_jsx(\"div\",{style:styles.card,children:/*#__PURE__*/_jsx(\"pre\",{style:{whiteSpace:\"pre-wrap\",fontFamily:\"sans-serif\"},children:result})})]});};const NavItem=_ref7=>{let{icon,label,isActive,onClick}=_ref7;return/*#__PURE__*/_jsxs(\"button\",{onClick:onClick,style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",color:isActive?\"#38bdf8\":\"#9ca3af\",background:\"none\",border:\"none\",cursor:\"pointer\"},children:[icon,/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",marginTop:\"0.25rem\"},children:label})]});};const BottomNav=_ref8=>{let{currentView,setView,onAddNew}=_ref8;const{width}=useWindowSize();if(width>=768)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",bottom:0,left:0,right:0,backgroundColor:\"#1f2937\",borderTop:\"1px solid #374151\",zIndex:10},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-around\",alignItems:\"center\",height:\"4rem\",maxWidth:\"448px\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(NavItem,{icon:/*#__PURE__*/_jsx(Icon,{name:\"BarChart2\"}),label:\"Dashboard\",isActive:currentView===\"dashboard\",onClick:()=>setView(\"dashboard\")}),/*#__PURE__*/_jsx(NavItem,{icon:/*#__PURE__*/_jsx(Icon,{name:\"Briefcase\"}),label:\"Historial\",isActive:currentView===\"list\",onClick:()=>setView(\"list\")}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"relative\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:onAddNew,style:_objectSpread(_objectSpread(_objectSpread({},styles.button),styles.buttonPrimary),{},{borderRadius:\"9999px\",padding:\"1rem\",position:\"absolute\",top:\"-2rem\",left:\"50%\",transform:\"translateX(-50%)\"}),children:/*#__PURE__*/_jsx(Icon,{name:\"PlusCircle\",style:{width:\"28px\",height:\"28px\"}})})}),/*#__PURE__*/_jsx(NavItem,{icon:/*#__PURE__*/_jsx(Icon,{name:\"FileText\"}),label:\"Reportes\",isActive:currentView===\"reports\",onClick:()=>setView(\"reports\")}),/*#__PURE__*/_jsx(NavItem,{icon:/*#__PURE__*/_jsx(Icon,{name:\"BrainCircuit\"}),label:\"An\\xE1lisis\",isActive:currentView===\"analysis\",onClick:()=>setView(\"analysis\")})]})});};const FormInput=_ref9=>{let{label,name}=_ref9,props=_objectWithoutProperties(_ref9,_excluded);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:name,style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",marginBottom:\"0.25rem\"},title:props.title,children:label}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({id:name,name:name},props),{},{style:styles.formInput}))]});};const FormSelect=_ref0=>{let{label,name,options}=_ref0,props=_objectWithoutProperties(_ref0,_excluded2);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:name,style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",marginBottom:\"0.25rem\"},children:label}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({id:name,name:name},props),{},{style:styles.formSelect,children:[options.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt)),\" \"]}))]});};const StatCard=_ref1=>{let{icon,title,value}=_ref1;return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.card),styles.statCard),children:[/*#__PURE__*/_jsx(\"div\",{style:styles.statIcon,children:icon}),/*#__PURE__*/_jsxs(\"div\",{style:styles.statTextContainer,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.statTitle,children:title}),/*#__PURE__*/_jsx(\"p\",{style:styles.statValue,children:value})]})]});};const CalcResult=_ref10=>{let{label,value,isPositive,style={}}=_ref10;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#374151\",padding:\"0.75rem\",borderRadius:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"p\",{style:styles.statTitle,children:label}),/*#__PURE__*/_jsx(\"p\",{style:_objectSpread({fontWeight:\"bold\",fontSize:\"1.125rem\",color:isPositive===false?\"#f87171\":\"white\"},style),children:value})]});};const OperationModal=_ref11=>{let{isOpen,onClose,onSave,operation}=_ref11;const[formData,setFormData]=useState({});const{width}=useWindowSize();const isMobile=width<=768;useEffect(()=>{const today=new Date();const y=today.getFullYear();const m=String(today.getMonth()+1).padStart(2,\"0\");const d=String(today.getDate()).padStart(2,\"0\");if(operation){var _operation$fecha;const opDate=(_operation$fecha=operation.fecha)!==null&&_operation$fecha!==void 0&&_operation$fecha.toDate?operation.fecha.toDate():new Date(operation.fecha||today);const opY=opDate.getFullYear();const opM=String(opDate.getMonth()+1).padStart(2,\"0\");const opD=String(opDate.getDate()).padStart(2,\"0\");setFormData(_objectSpread(_objectSpread({},operation),{},{fecha:\"\".concat(opY,\"-\").concat(opM,\"-\").concat(opD)}));}else{setFormData({id:null,fecha:\"\".concat(y,\"-\").concat(m,\"-\").concat(d),sucursal:\"Brasil\",asignado:\"Charly\",banco:\"Banesco\",moneda:\"BRL\",monto:\"\",tasaCompra:\"\",tasaVenta:\"\",tasaCambio:\"\"});}},[operation]);const calculations=useMemo(()=>{var _formData$banco;const monto=parseFloat(formData.monto)||0;const tasaCompra=parseFloat(formData.tasaCompra)||0;const tasaInterna=parseFloat(formData.tasaVenta)||0;const tasaCliente=parseFloat(formData.tasaCambio)||0;const moneda=formData.moneda;const montoEntregarBs=monto*tasaCliente;let montoRecibidoEnUSD=0;if(moneda===\"USD\")montoRecibidoEnUSD=monto;else if(tasaCompra>0)montoRecibidoEnUSD=monto/tasaCompra;let costoEntregaEnUSD=0;if(tasaInterna>0)costoEntregaEnUSD=montoEntregarBs/tasaInterna;const comisionPagoMovilBs=(_formData$banco=formData.banco)!==null&&_formData$banco!==void 0&&_formData$banco.includes(\"Pago Movil\")?montoEntregarBs*PAGO_MOVIL_COMMISSION_RATE:0;const comisionEnUSD=tasaInterna>0?comisionPagoMovilBs/tasaInterna:0;const gananciaNetaUSD=montoRecibidoEnUSD-costoEntregaEnUSD-comisionEnUSD;const montoEnUSD=montoRecibidoEnUSD;let gananciaMia=0,gananciaAsignado=0,gananciaCharly=0;if(formData.sucursal===\"Brasil\"&&formData.asignado!==\"Charly\"){gananciaMia=gananciaNetaUSD*0.5;const gananciaSocio=gananciaNetaUSD*0.5;gananciaAsignado=gananciaSocio*(0.43/0.5);gananciaCharly=gananciaSocio*(0.07/0.5);}else{gananciaMia=gananciaNetaUSD*0.5;gananciaAsignado=gananciaNetaUSD*0.5;}return{montoEnUSD,montoEntregarBs,comisionPagoMovilBs,gananciaNetaUSD,gananciaMia,gananciaAsignado,gananciaCharly};},[formData]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>{var _ASIGNADOS$value;const newState=_objectSpread(_objectSpread({},prev),{},{[name]:value});if(name===\"sucursal\")newState.asignado=((_ASIGNADOS$value=ASIGNADOS[value])===null||_ASIGNADOS$value===void 0?void 0:_ASIGNADOS$value[0])||\"\";return newState;});};const handleSubmit=e=>{e.preventDefault();// **REESCRITURA DE LA LÓGICA PARA EVITAR PERDER EL ID**\nconst dataToSubmit=_objectSpread(_objectSpread(_objectSpread({},formData),calculations),{},{monto:parseFloat(formData.monto)||0,tasaCompra:parseFloat(formData.tasaCompra)||0,tasaCambio:parseFloat(formData.tasaCambio)||0,tasaVenta:parseFloat(formData.tasaVenta)||0,fecha:new Date(formData.fecha+\"T00:00:00\")});// Aseguramos que el ID del 'operation' original se mantenga si estamos editando\nif(operation&&operation.id){dataToSubmit.id=operation.id;}onSave(dataToSubmit);};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.modalHeader,children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"bold\"},children:operation?\"Editar Operación\":\"Nueva Operación\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:\"none\",border:\"none\",color:\"white\",cursor:\"pointer\"},children:/*#__PURE__*/_jsx(Icon,{name:\"X\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",flexDirection:\"column\",flexGrow:1,overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{overflowY:\"auto\",flexGrow:1,padding:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols2),{},{marginBottom:\"1rem\"}),children:[/*#__PURE__*/_jsx(FormInput,{label:\"Fecha\",type:\"date\",name:\"fecha\",value:formData.fecha||\"\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"Banco\",name:\"banco\",value:formData.banco||\"\",onChange:handleChange,options:BANCOS})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols2),{},{marginBottom:\"1rem\"}),children:[/*#__PURE__*/_jsx(FormSelect,{label:\"Sucursal\",name:\"sucursal\",value:formData.sucursal||\"\",onChange:handleChange,options:SUCURSALES}),/*#__PURE__*/_jsx(FormSelect,{label:\"Asignado\",name:\"asignado\",value:formData.asignado||\"\",onChange:handleChange,options:ASIGNADOS[formData.sucursal]||[]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"rgba(55, 65, 81, 0.5)\",padding:\"1rem\",borderRadius:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#7dd3fc\",marginBottom:\"1rem\"},children:\"Monto y Tasas\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols2),{},{marginBottom:\"1rem\"}),children:[/*#__PURE__*/_jsx(FormInput,{label:\"Monto Recibido\",type:\"number\",name:\"monto\",value:formData.monto||\"\",onChange:handleChange,required:true,placeholder:\"100.00\",step:\"0.01\"}),/*#__PURE__*/_jsx(FormSelect,{label:\"Moneda\",name:\"moneda\",value:formData.moneda||\"\",onChange:handleChange,options:MONEDAS})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols3),children:[/*#__PURE__*/_jsx(FormInput,{label:\"Tasa Cliente\",type:\"number\",name:\"tasaCambio\",value:formData.tasaCambio||\"\",onChange:handleChange,placeholder:\"22.52\",step:\"0.0001\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Tasa Compra\",type:\"number\",name:\"tasaCompra\",value:formData.tasaCompra||\"\",onChange:handleChange,placeholder:\"5.61\",step:\"0.0001\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Tasa Interna\",type:\"number\",name:\"tasaVenta\",value:formData.tasaVenta||\"\",onChange:handleChange,placeholder:\"133\",step:\"0.0001\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"rgba(17, 24, 39, 0.5)\",padding:\"1.5rem\",marginTop:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#7dd3fc\",marginBottom:\"0.75rem\"},children:\"Resultados\"}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},styles.grid),isMobile?styles.gridCols1:styles.gridCols2),children:[/*#__PURE__*/_jsx(CalcResult,{label:\"Bol\\xEDvares a Recibir\",value:formatCurrency(calculations.montoEntregarBs,\"VES\"),style:styles.textSky}),/*#__PURE__*/_jsx(CalcResult,{label:\"Ganancia Neta ($)\",value:formatCurrency(calculations.gananciaNetaUSD),isPositive:calculations.gananciaNetaUSD>=0}),/*#__PURE__*/_jsx(CalcResult,{label:\"Mi Ganancia\",value:formatCurrency(calculations.gananciaMia),style:styles.textGreen}),/*#__PURE__*/_jsx(CalcResult,{label:\"Ganancia Asignado\",value:formatCurrency(calculations.gananciaAsignado)}),formData.sucursal===\"Brasil\"&&formData.asignado!==\"Charly\"&&/*#__PURE__*/_jsx(CalcResult,{label:\"Ganancia Charly\",value:formatCurrency(calculations.gananciaCharly)})]})]})]}),/*#__PURE__*/_jsxs(\"footer\",{style:styles.modalFooter,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,style:_objectSpread(_objectSpread({},styles.button),styles.buttonSecondary),children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:_objectSpread(_objectSpread({},styles.button),styles.buttonPrimary),children:operation?\"Actualizar\":\"Guardar\"})]})]})]})});};// --- COMPONENTE PRINCIPAL DE LA APP ---\nexport default function App(){const[view,setView]=useState(\"list\");// Iniciar en la lista para pruebas\nconst[operations,setOperations]=useState([]);const[loading,setLoading]=useState(true);const[isAuthReady,setIsAuthReady]=useState(false);const[userId,setUserId]=useState(null);const[isModalOpen,setIsModalOpen]=useState(false);const[editingOperation,setEditingOperation]=useState(null);const[analysisResult,setAnalysisResult]=useState(\"\");const[isAnalysisLoading,setIsAnalysisLoading]=useState(false);useEffect(()=>{document.body.style.margin=\"0\";},[]);useEffect(()=>{if(!firebaseInitialized){setLoading(false);return;}const unsubscribe=onAuthStateChanged(auth,async user=>{if(user){setUserId(user.uid);}else{try{if(typeof __initial_auth_token!==\"undefined\"&&__initial_auth_token)await signInWithCustomToken(auth,__initial_auth_token);else await signInAnonymously(auth);}catch(error){console.error(\"Anonymous sign-in failed\",error);}}setIsAuthReady(true);});return()=>unsubscribe();},[]);useEffect(()=>{if(!isAuthReady||!userId){setLoading(false);return;}setLoading(true);const collectionPath=\"/artifacts/\".concat(appId,\"/users/\").concat(userId,\"/operations\");const q=query(collection(db,collectionPath));const unsubscribe=onSnapshot(q,querySnapshot=>{const opsData=querySnapshot.docs.map(doc=>{var _doc$data$fecha;return _objectSpread(_objectSpread({id:doc.id},doc.data()),{},{fecha:(_doc$data$fecha=doc.data().fecha)!==null&&_doc$data$fecha!==void 0&&_doc$data$fecha.toDate?doc.data().fecha.toDate():new Date(doc.data().fecha||new Date())});});opsData.sort((a,b)=>b.fecha-a.fecha);setOperations(opsData);setLoading(false);},error=>{console.error(\"Error fetching operations:\",error);setLoading(false);});return()=>unsubscribe();},[isAuthReady,userId]);const handleSaveOperation=async operationData=>{console.log(\"Intentando guardar:\",operationData);const currentUser=auth.currentUser;if(!currentUser){alert(\"Error de autenticación. Por favor, recargue la página.\");return;}const collectionPath=\"/artifacts/\".concat(appId,\"/users/\").concat(currentUser.uid,\"/operations\");const{id}=operationData,dataToSave=_objectWithoutProperties(operationData,_excluded3);try{if(id){console.log(\"Actualizando documento con ID: \".concat(id));const docRef=doc(db,collectionPath,id);await updateDoc(docRef,dataToSave);}else{console.log(\"Creando nuevo documento\");await addDoc(collection(db,collectionPath),dataToSave);}setIsModalOpen(false);setEditingOperation(null);}catch(error){console.error(\"Error al guardar operación:\",error);alert(\"Error al guardar: \".concat(error.message));}};const handleDeleteOperation=async idToDelete=>{console.log(\"Intentando borrar documento con ID: \".concat(idToDelete));const isConfirmed=window.confirm(\"¿Estás seguro de que quieres eliminar esta operación?\");if(!isConfirmed)return;const currentUser=auth.currentUser;if(!currentUser){alert(\"Error de autenticación. Por favor, recargue la página.\");return;}const collectionPath=\"/artifacts/\".concat(appId,\"/users/\").concat(currentUser.uid,\"/operations\");try{const docRef=doc(db,collectionPath,idToDelete);await deleteDoc(docRef);console.log(\"Documento borrado exitosamente.\");}catch(error){console.error(\"Error al borrar operación:\",error);alert(\"Error al borrar: \".concat(error.message));}};const openModalForEdit=op=>{setEditingOperation(op);setIsModalOpen(true);};const openModalForNew=()=>{setEditingOperation(null);setIsModalOpen(true);};const myDailyStats=useMemo(()=>{const today=new Date();today.setHours(0,0,0,0);const todayOps=operations.filter(op=>new Date(op.fecha).setHours(0,0,0,0)===today.getTime());return{myTotalGanancia:todayOps.reduce((acc,op)=>acc+(Number(op.gananciaMia)||0),0),totalMovidoUSD:todayOps.reduce((acc,op)=>acc+(Number(op.montoEnUSD)||0),0),count:todayOps.length};},[operations]);if(!firebaseInitialized)return/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.appContainer),{},{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"}),children:/*#__PURE__*/_jsx(\"p\",{children:\"Error: No se pudo conectar con la base de datos.\"})});return/*#__PURE__*/_jsxs(\"div\",{style:styles.appContainer,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{style:{marginTop:\"1.5rem\"},children:[view===\"dashboard\"&&/*#__PURE__*/_jsx(DashboardView,{stats:myDailyStats,onAddNew:openModalForNew}),view===\"list\"&&/*#__PURE__*/_jsx(OperationsListView,{operations:operations,onEdit:openModalForEdit,onDelete:handleDeleteOperation,loading:loading,onAddNew:openModalForNew}),view===\"reports\"&&/*#__PURE__*/_jsx(ReportsView,{allOperations:operations}),view===\"analysis\"&&/*#__PURE__*/_jsx(AnalysisView,{onGetAnalysis:()=>{},result:analysisResult,isLoading:isAnalysisLoading})]})]}),/*#__PURE__*/_jsx(BottomNav,{currentView:view,setView:setView,onAddNew:openModalForNew}),isModalOpen&&/*#__PURE__*/_jsx(OperationModal,{isOpen:isModalOpen,onClose:()=>{setIsModalOpen(false);setEditingOperation(null);},onSave:handleSaveOperation,operation:editingOperation})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","signInWithCustomToken","getFirestore","collection","doc","addDoc","updateDoc","deleteDoc","onSnapshot","query","ArrowUpDown","Trash2","Edit","PlusCircle","X","Search","DollarSign","Calendar","Users","BarChart2","Briefcase","User","Banknote","BrainCircuit","FileText","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","userProvidedConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseConfig","__firebase_config","JSON","parse","__app_id","app","auth","db","firebaseInitialized","error","console","styles","appContainer","backgroundColor","color","minHeight","fontFamily","paddingBottom","container","maxWidth","margin","padding","header","display","justifyContent","alignItems","headerTitle","gap","headerH1","fontSize","fontWeight","card","borderRadius","boxShadow","border","statCard","statIcon","statTextContainer","flexDirection","statTitle","statValue","button","cursor","transition","buttonPrimary","buttonSecondary","table","width","textAlign","th","textTransform","td","borderBottom","modalOverlay","position","inset","zIndex","modalContent","maxHeight","modalHeader","flexShrink","modalBody","flexGrow","overflowY","modalFooter","borderTop","formInput","boxSizing","outline","formSelect","grid","gridCols1","gridTemplateColumns","gridCols2","gridCols3","gridCols4","textRight","fontMono","textGreen","textSky","textYellow","textIndigo","icon","height","useWindowSize","windowSize","setWindowSize","undefined","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","Icon","_ref","name","style","icons","LucideIcon","_objectSpread","formatCurrency","value","currency","arguments","length","numericValue","Number","isNaN","options","minimumFractionDigits","maximumFractionDigits","Intl","NumberFormat","format","concat","formatDate","date","d","toDate","Date","getTime","toLocaleDateString","year","month","day","getLocalDateString","y","getFullYear","m","String","getMonth","padStart","getDate","SUCURSALES","ASIGNADOS","Brasil","Ecuador","Peru","ALL_ASIGNADOS","Set","Object","values","flat","BANCOS","MONEDAS","PAGO_MOVIL_COMMISSION_RATE","Header","children","DashboardView","_ref2","stats","onAddNew","isMobile","onClick","StatCard","title","myTotalGanancia","totalMovidoUSD","count","ResultsTable","_ref3","operations","loading","onEdit","onDelete","overflowX","map","op","fecha","asignado","monto","moneda","gananciaMia","background","id","OperationsListView","_ref4","searchTerm","setSearchTerm","filteredOperations","filter","_op$asignado","_op$sucursal","toLowerCase","includes","sucursal","marginBottom","type","placeholder","onChange","e","target","ReportsView","_ref5","allOperations","today","firstDayOfMonth","filters","setFilters","startDate","endDate","reportData","setReportData","handleFilterChange","prev","handleGenerateReport","start","end","filteredOps","opDate","totals","reduce","acc","gananciaAsignado","gananciaCharly","gananciaNetaUSD","ops","FormInput","label","FormSelect","alignSelf","AnalysisView","_ref6","onGetAnalysis","result","isLoading","disabled","whiteSpace","NavItem","_ref7","isActive","marginTop","BottomNav","_ref8","currentView","setView","bottom","left","right","top","transform","_ref9","props","_objectWithoutProperties","_excluded","htmlFor","_ref0","_excluded2","opt","_ref1","CalcResult","_ref10","isPositive","OperationModal","_ref11","isOpen","onClose","onSave","operation","formData","setFormData","_operation$fecha","opY","opM","opD","banco","tasaCompra","tasaVenta","tasaCambio","calculations","_formData$banco","parseFloat","tasaInterna","tasaCliente","montoEntregarBs","montoRecibidoEnUSD","costoEntregaEnUSD","comisionPagoMovilBs","comisionEnUSD","montoEnUSD","gananciaSocio","handleChange","_ASIGNADOS$value","newState","handleSubmit","preventDefault","dataToSubmit","onSubmit","overflow","required","step","App","view","setOperations","setLoading","isAuthReady","setIsAuthReady","userId","setUserId","isModalOpen","setIsModalOpen","editingOperation","setEditingOperation","analysisResult","setAnalysisResult","isAnalysisLoading","setIsAnalysisLoading","document","body","unsubscribe","user","uid","__initial_auth_token","collectionPath","q","querySnapshot","opsData","docs","_doc$data$fecha","data","sort","a","b","handleSaveOperation","operationData","log","currentUser","alert","dataToSave","_excluded3","docRef","message","handleDeleteOperation","idToDelete","isConfirmed","confirm","openModalForEdit","openModalForNew","myDailyStats","setHours","todayOps"],"sources":["C:/Users/samtest/Downloads/reporte-cambios---Copy/src/App.jsx"],"sourcesContent":["/* global __firebase_config, __app_id, __initial_auth_token */\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { initializeApp } from \"firebase/app\";\nimport {\n  getAuth,\n  signInAnonymously,\n  onAuthStateChanged,\n  signInWithCustomToken,\n} from \"firebase/auth\";\nimport {\n  getFirestore,\n  collection,\n  doc,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  onSnapshot,\n  query,\n} from \"firebase/firestore\";\nimport {\n  ArrowUpDown,\n  Trash2,\n  Edit,\n  PlusCircle,\n  X,\n  Search,\n  DollarSign,\n  Calendar,\n  Users,\n  BarChart2,\n  Briefcase,\n  User,\n  Banknote,\n  BrainCircuit,\n  FileText,\n} from \"lucide-react\";\n\n// --- Configuración de Firebase ---\nconst userProvidedConfig = {\n  apiKey: \"AIzaSyA7TPxMemR7F9qpU3kzPLRcC3K9lMZoEXc\",\n  authDomain: \"mi-gestor-de-operaciones.firebaseapp.com\",\n  projectId: \"mi-gestor-de-operaciones\",\n  storageBucket: \"mi-gestor-de-operaciones.appspot.com\",\n  messagingSenderId: \"1003121856869\",\n  appId: \"1:1003121856869:web:2fec288ef83c8af586518c\",\n  measurementId: \"G-F361D6HLFT\",\n};\n\nconst firebaseConfig =\n  typeof __firebase_config !== \"undefined\" && __firebase_config\n    ? JSON.parse(__firebase_config)\n    : userProvidedConfig;\n\nconst appId =\n  typeof __app_id !== \"undefined\" ? __app_id : \"default-registro-app-v6\";\n\nlet app;\nlet auth;\nlet db;\nlet firebaseInitialized = false;\n\nif (firebaseConfig && firebaseConfig.apiKey) {\n  try {\n    app = initializeApp(firebaseConfig);\n    auth = getAuth(app);\n    db = getFirestore(app);\n    firebaseInitialized = true;\n  } catch (error) {\n    console.error(\"Firebase initialization failed:\", error);\n    firebaseInitialized = false;\n  }\n}\n\n// --- Estilos y Helpers (sin cambios) ---\nconst styles = {\n  appContainer: {\n    backgroundColor: \"#111827\",\n    color: \"white\",\n    minHeight: \"100vh\",\n    fontFamily: \"sans-serif\",\n    paddingBottom: \"80px\",\n  },\n  container: { maxWidth: \"1280px\", margin: \"0 auto\", padding: \"1rem\" },\n  header: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    color: \"#7dd3fc\",\n  },\n  headerTitle: { display: \"flex\", alignItems: \"center\", gap: \"0.75rem\" },\n  headerH1: { fontSize: \"1.875rem\", fontWeight: \"bold\" },\n  card: {\n    backgroundColor: \"#1f2937\",\n    padding: \"1.25rem\",\n    borderRadius: \"0.75rem\",\n    boxShadow:\n      \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)\",\n    border: \"1px solid #374151\",\n  },\n  statCard: { display: \"flex\", alignItems: \"center\", gap: \"1rem\" },\n  statIcon: {\n    padding: \"0.75rem\",\n    borderRadius: \"9999px\",\n    backgroundColor: \"#374151\",\n  },\n  statTextContainer: { display: \"flex\", flexDirection: \"column\" },\n  statTitle: { fontSize: \"0.875rem\", fontWeight: \"500\", color: \"#9ca3af\" },\n  statValue: { fontSize: \"1.5rem\", fontWeight: \"bold\" },\n  button: {\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    gap: \"0.5rem\",\n    justifyContent: \"center\",\n    padding: \"0.75rem 1rem\",\n    fontWeight: \"bold\",\n    color: \"white\",\n    borderRadius: \"0.5rem\",\n    border: \"none\",\n    cursor: \"pointer\",\n    transition: \"background-color 0.2s\",\n  },\n  buttonPrimary: { backgroundColor: \"#0284c7\" },\n  buttonSecondary: { backgroundColor: \"#4b5563\" },\n  table: { width: \"100%\", textAlign: \"left\", fontSize: \"0.875rem\" },\n  th: {\n    padding: \"0.75rem\",\n    textTransform: \"uppercase\",\n    color: \"#9ca3af\",\n    backgroundColor: \"rgba(55, 65, 81, 0.5)\",\n  },\n  td: { padding: \"0.75rem\", borderBottom: \"1px solid #374151\" },\n  modalOverlay: {\n    position: \"fixed\",\n    inset: \"0\",\n    backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n    zIndex: 50,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: \"1rem\",\n  },\n  modalContent: {\n    backgroundColor: \"#1f2937\",\n    borderRadius: \"0.5rem\",\n    boxShadow: \"0 10px 15px -3px rgba(0,0,0,0.1)\",\n    width: \"100%\",\n    maxWidth: \"640px\",\n    maxHeight: \"90vh\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    border: \"1px solid #374151\",\n  },\n  modalHeader: {\n    padding: \"1rem\",\n    borderBottom: \"1px solid #374151\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    flexShrink: 0,\n  },\n  modalBody: { flexGrow: 1, overflowY: \"auto\" },\n  modalFooter: {\n    padding: \"1rem\",\n    borderTop: \"1px solid #374151\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    gap: \"0.75rem\",\n    flexShrink: 0,\n  },\n  formInput: {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    backgroundColor: \"#374151\",\n    border: \"1px solid #4b5563\",\n    borderRadius: \"0.375rem\",\n    padding: \"0.5rem 0.75rem\",\n    color: \"white\",\n    outline: \"none\",\n  },\n  formSelect: {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    backgroundColor: \"#374151\",\n    border: \"1px solid #4b5563\",\n    borderRadius: \"0.375rem\",\n    padding: \"0.5rem 0.75rem\",\n    color: \"white\",\n    outline: \"none\",\n  },\n  grid: { display: \"grid\", gap: \"1rem\" },\n  gridCols1: { gridTemplateColumns: \"repeat(1, minmax(0, 1fr))\" },\n  gridCols2: { gridTemplateColumns: \"repeat(2, minmax(0, 1fr))\" },\n  gridCols3: { gridTemplateColumns: \"repeat(3, minmax(0, 1fr))\" },\n  gridCols4: { gridTemplateColumns: \"repeat(4, minmax(0, 1fr))\" },\n  textRight: { textAlign: \"right\" },\n  fontMono: { fontFamily: \"monospace\" },\n  textGreen: { color: \"#4ade80\" },\n  textSky: { color: \"#38bdf8\" },\n  textYellow: { color: \"#facc15\" },\n  textIndigo: { color: \"#818cf8\" },\n  icon: { width: \"24px\", height: \"24px\" },\n};\n\nconst useWindowSize = () => {\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({ width: window.innerWidth, height: window.innerHeight });\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowSize;\n};\n\nconst Icon = ({ name, style }) => {\n  const icons = {\n    Banknote,\n    DollarSign,\n    ArrowUpDown,\n    BarChart2,\n    Briefcase,\n    PlusCircle,\n    FileText,\n    BrainCircuit,\n    Users,\n    User,\n    Edit,\n    Trash2,\n    X,\n    Search,\n  };\n  const LucideIcon = icons[name];\n  if (!LucideIcon) return null;\n  return <LucideIcon style={{ ...styles.icon, ...style }} />;\n};\n\nconst formatCurrency = (value, currency = \"USD\") => {\n  const numericValue = Number(value);\n  if (isNaN(numericValue)) return currency === \"USD\" ? \"$0.00\" : \"Bs 0.00\";\n  const options = {\n    style: \"currency\",\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  };\n  if (currency === \"BRL\") {\n    options.currency = \"BRL\";\n    return new Intl.NumberFormat(\"pt-BR\", options).format(numericValue);\n  }\n  if (currency === \"VES\") {\n    options.currency = \"VES\";\n    return `Bs ${new Intl.NumberFormat(\"es-VE\", {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(numericValue)}`;\n  }\n  options.currency = \"USD\";\n  return new Intl.NumberFormat(\"en-US\", options).format(numericValue);\n};\n\nconst formatDate = (date) => {\n  if (!date) return \"N/A\";\n  const d = date.toDate ? date.toDate() : new Date(date);\n  if (isNaN(d.getTime())) return \"Fecha inválida\";\n  return d.toLocaleDateString(\"es-VE\", {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  });\n};\n\nconst getLocalDateString = (date) => {\n  const y = date.getFullYear();\n  const m = String(date.getMonth() + 1).padStart(2, \"0\");\n  const d = String(date.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${d}`;\n};\n\nconst SUCURSALES = [\"Brasil\", \"Ecuador\", \"Peru\"];\nconst ASIGNADOS = {\n  Brasil: [\n    \"Charly\",\n    \"Moises\",\n    \"Daniela\",\n    \"Liden\",\n    \"Josef\",\n    \"Luzmarys\",\n    \"Leonel\",\n    \"Giralbis\",\n    \"Antonio\",\n    \"Carolina\",\n    \"Vanessa\",\n    \"Francis\",\n  ],\n  Ecuador: [\"Nathaly\"],\n  Peru: [\"Wilyam\"],\n};\nconst ALL_ASIGNADOS = [...new Set(Object.values(ASIGNADOS).flat())];\nconst BANCOS = [\n  \"Venezuela\",\n  \"Banesco\",\n  \"Provincial\",\n  \"Mercantil\",\n  \"BNC\",\n  \"Pago Movil (Banesco)\",\n  \"Pago Movil (Provincial)\",\n  \"Pago Movil (Venezuela)\",\n  \"Pago Movil (Mercantil)\",\n  \"Pago Movil (BNC)\",\n];\nconst MONEDAS = [\"BRL\", \"USD\", \"PEN\", \"EUR\", \"VES\"];\nconst PAGO_MOVIL_COMMISSION_RATE = 0.003;\n\n// --- INICIO DE COMPONENTES DE UI ---\n\nconst Header = () => (\n  <header style={styles.header}>\n    <div style={styles.headerTitle}>\n      <Icon name=\"Banknote\" />\n      <h1 style={styles.headerH1}>Gestor de Cambios</h1>\n    </div>\n  </header>\n);\n\nconst DashboardView = ({ stats, onAddNew }) => {\n  const { width } = useWindowSize();\n  const isMobile = width <= 768;\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"1.5rem\" }}>\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n        }}\n      >\n        <h2\n          style={{ fontSize: \"1.25rem\", fontWeight: \"600\", color: \"#d1d5db\" }}\n        >\n          Tu Resumen del Día\n        </h2>\n        {!isMobile && (\n          <button\n            onClick={onAddNew}\n            style={{ ...styles.button, ...styles.buttonPrimary }}\n          >\n            <Icon name=\"PlusCircle\" />\n            <span>Nueva Operación</span>\n          </button>\n        )}\n      </div>\n      <div\n        style={{\n          ...styles.grid,\n          ...(isMobile ? styles.gridCols1 : styles.gridCols3),\n        }}\n      >\n        <StatCard\n          icon={<Icon name=\"DollarSign\" style={{ color: \"#4ade80\" }} />}\n          title=\"Mi Ganancia Hoy\"\n          value={formatCurrency(stats.myTotalGanancia)}\n        />\n        <StatCard\n          icon={<Icon name=\"ArrowUpDown\" style={{ color: \"#38bdf8\" }} />}\n          title=\"Total Transado (USD)\"\n          value={formatCurrency(stats.totalMovidoUSD)}\n        />\n        <StatCard\n          icon={<Icon name=\"BarChart2\" style={{ color: \"#facc15\" }} />}\n          title=\"Operaciones\"\n          value={stats.count}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst ResultsTable = ({ operations, loading, onEdit, onDelete }) => {\n  if (loading)\n    return (\n      <div style={{ textAlign: \"center\", padding: \"2.5rem\" }}>\n        <p>Cargando datos...</p>\n      </div>\n    );\n  if (operations.length === 0)\n    return (\n      <div style={{ textAlign: \"center\", padding: \"2.5rem\" }}>\n        <h3 style={{ fontSize: \"1.125rem\", fontWeight: \"600\" }}>\n          No hay operaciones registradas\n        </h3>\n      </div>\n    );\n  return (\n    <div style={{ overflowX: \"auto\" }}>\n      <table style={styles.table}>\n        <thead>\n          <tr>\n            <th style={styles.th}>Fecha</th>\n            <th style={styles.th}>Asignado</th>\n            <th style={{ ...styles.th, ...styles.textRight }}>Monto</th>\n            <th style={{ ...styles.th, ...styles.textRight }}>Mi Ganancia</th>\n            <th style={{ ...styles.th, textAlign: \"center\" }}>Acciones</th>\n          </tr>\n        </thead>\n        <tbody>\n          {operations.map((op) => (\n            <tr key={op.id} style={{ borderBottom: \"1px solid #374151\" }}>\n              <td style={styles.td}>{formatDate(op.fecha)}</td>\n              <td style={{ ...styles.td, fontWeight: \"500\" }}>{op.asignado}</td>\n              <td\n                style={{\n                  ...styles.td,\n                  ...styles.fontMono,\n                  ...styles.textRight,\n                }}\n              >\n                {formatCurrency(op.monto, op.moneda)}\n              </td>\n              <td\n                style={{\n                  ...styles.td,\n                  ...styles.fontMono,\n                  ...styles.textRight,\n                  ...styles.textGreen,\n                  fontWeight: \"600\",\n                }}\n              >\n                {formatCurrency(op.gananciaMia)}\n              </td>\n              <td style={{ ...styles.td, textAlign: \"center\" }}>\n                {onEdit && onDelete && (\n                  <>\n                    <button\n                      onClick={() => onEdit(op)}\n                      style={{\n                        background: \"none\",\n                        border: \"none\",\n                        cursor: \"pointer\",\n                        padding: \"0.5rem\",\n                        color: \"#38bdf8\",\n                      }}\n                    >\n                      <Icon name=\"Edit\" />\n                    </button>\n                    <button\n                      onClick={() => onDelete(op.id)}\n                      style={{\n                        background: \"none\",\n                        border: \"none\",\n                        cursor: \"pointer\",\n                        padding: \"0.5rem\",\n                        color: \"#f87171\",\n                      }}\n                    >\n                      <Icon name=\"Trash2\" />\n                    </button>\n                  </>\n                )}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nconst OperationsListView = ({\n  operations,\n  onEdit,\n  onDelete,\n  loading,\n  onAddNew,\n}) => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const { width } = useWindowSize();\n  const isMobile = width <= 768;\n  const filteredOperations = useMemo(() => {\n    if (!searchTerm) return operations;\n    return operations.filter(\n      (op) =>\n        (op.asignado?.toLowerCase() || \"\").includes(searchTerm.toLowerCase()) ||\n        (op.sucursal?.toLowerCase() || \"\").includes(searchTerm.toLowerCase())\n    );\n  }, [operations, searchTerm]);\n  return (\n    <div style={styles.card}>\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          marginBottom: \"1rem\",\n          flexDirection: isMobile ? \"column\" : \"row\",\n          gap: \"1rem\",\n        }}\n      >\n        <h2\n          style={{ fontSize: \"1.25rem\", fontWeight: \"600\", color: \"#e5e7eb\" }}\n        >\n          Historial de Operaciones\n        </h2>\n        <div\n          style={{\n            display: \"flex\",\n            gap: \"1rem\",\n            width: isMobile ? \"100%\" : \"auto\",\n          }}\n        >\n          <input\n            type=\"text\"\n            placeholder=\"Buscar...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            style={{ ...styles.formInput, flexGrow: 1 }}\n          />\n          {!isMobile && (\n            <button\n              onClick={onAddNew}\n              style={{ ...styles.button, ...styles.buttonPrimary }}\n            >\n              <Icon name=\"PlusCircle\" />\n              <span>Añadir</span>\n            </button>\n          )}\n        </div>\n      </div>\n      <ResultsTable\n        operations={filteredOperations}\n        loading={loading}\n        onEdit={onEdit}\n        onDelete={onDelete}\n      />\n    </div>\n  );\n};\n\nconst ReportsView = ({ allOperations }) => {\n  const today = new Date();\n  const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\n  const { width } = useWindowSize();\n  const isMobile = width <= 768;\n  const [filters, setFilters] = useState({\n    startDate: getLocalDateString(firstDayOfMonth),\n    endDate: getLocalDateString(today),\n    asignado: \"Todos\",\n  });\n  const [reportData, setReportData] = useState(null);\n  const handleFilterChange = (e) =>\n    setFilters((prev) => ({ ...prev, [e.target.name]: e.target.value }));\n  const handleGenerateReport = () => {\n    const { startDate, endDate, asignado } = filters;\n    const start = new Date(startDate + \"T00:00:00\");\n    const end = new Date(endDate + \"T23:59:59\");\n    const filteredOps = allOperations.filter((op) => {\n      const opDate = op.fecha;\n      return (\n        opDate >= start &&\n        opDate <= end &&\n        (asignado === \"Todos\" || op.asignado === asignado)\n      );\n    });\n    const totals = filteredOps.reduce(\n      (acc, op) => {\n        acc.gananciaMia += Number(op.gananciaMia) || 0;\n        acc.gananciaAsignado += Number(op.gananciaAsignado) || 0;\n        acc.gananciaCharly += Number(op.gananciaCharly) || 0;\n        acc.gananciaNetaUSD += Number(op.gananciaNetaUSD) || 0;\n        return acc;\n      },\n      {\n        gananciaMia: 0,\n        gananciaAsignado: 0,\n        gananciaCharly: 0,\n        gananciaNetaUSD: 0,\n      }\n    );\n    setReportData({ ops: filteredOps, totals: totals });\n  };\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"1.5rem\" }}>\n      <div style={styles.card}>\n        <h2\n          style={{\n            fontSize: \"1.25rem\",\n            fontWeight: \"600\",\n            color: \"#e5e7eb\",\n            marginBottom: \"1rem\",\n          }}\n        >\n          Generador de Reportes\n        </h2>\n        <div\n          style={{\n            ...styles.grid,\n            ...(isMobile ? styles.gridCols1 : styles.gridCols4),\n          }}\n        >\n          <FormInput\n            label=\"Desde\"\n            type=\"date\"\n            name=\"startDate\"\n            value={filters.startDate}\n            onChange={handleFilterChange}\n          />\n          <FormInput\n            label=\"Hasta\"\n            type=\"date\"\n            name=\"endDate\"\n            value={filters.endDate}\n            onChange={handleFilterChange}\n          />\n          <FormSelect\n            label=\"Asignado\"\n            name=\"asignado\"\n            value={filters.asignado}\n            onChange={handleFilterChange}\n            options={[\"Todos\", ...ALL_ASIGNADOS]}\n          />\n          <button\n            onClick={handleGenerateReport}\n            style={{\n              ...styles.button,\n              ...styles.buttonPrimary,\n              alignSelf: \"flex-end\",\n              height: \"38px\",\n            }}\n          >\n            Generar\n          </button>\n        </div>\n      </div>\n      {reportData && (\n        <div style={styles.card}>\n          <h3\n            style={{\n              fontSize: \"1.125rem\",\n              fontWeight: \"600\",\n              color: \"#7dd3fc\",\n              marginBottom: \"1rem\",\n            }}\n          >\n            Resultados del Reporte\n          </h3>\n          <div\n            style={{\n              ...styles.grid,\n              ...(isMobile ? styles.gridCols1 : styles.gridCols4),\n              marginBottom: \"1.5rem\",\n            }}\n          >\n            <StatCard\n              icon={<Icon name=\"DollarSign\" style={styles.textGreen} />}\n              title=\"Mi Ganancia\"\n              value={formatCurrency(reportData.totals.gananciaMia)}\n            />\n            <StatCard\n              icon={<Icon name=\"Users\" style={styles.textYellow} />}\n              title=\"Ganancia Asignado(s)\"\n              value={formatCurrency(reportData.totals.gananciaAsignado)}\n            />\n            <StatCard\n              icon={<Icon name=\"User\" style={styles.textIndigo} />}\n              title=\"Ganancia Charly\"\n              value={formatCurrency(reportData.totals.gananciaCharly)}\n            />\n            <StatCard\n              icon={<Icon name=\"BarChart2\" style={styles.textSky} />}\n              title=\"Ganancia Neta Total\"\n              value={formatCurrency(reportData.totals.gananciaNetaUSD)}\n            />\n          </div>\n          <ResultsTable operations={reportData.ops} loading={false} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst AnalysisView = ({ onGetAnalysis, result, isLoading }) => (\n  <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"1.5rem\" }}>\n    <div style={styles.card}>\n      <h2\n        style={{\n          fontSize: \"1.25rem\",\n          fontWeight: \"600\",\n          color: \"#e5e7eb\",\n          marginBottom: \"1rem\",\n        }}\n      >\n        Análisis con IA\n      </h2>\n      <button\n        onClick={onGetAnalysis}\n        disabled={isLoading}\n        style={{ ...styles.button, ...styles.buttonPrimary }}\n      >\n        {isLoading ? \"Analizando...\" : \"✨ Analizar último mes\"}\n      </button>\n    </div>\n    {result && (\n      <div style={styles.card}>\n        <pre style={{ whiteSpace: \"pre-wrap\", fontFamily: \"sans-serif\" }}>\n          {result}\n        </pre>\n      </div>\n    )}\n  </div>\n);\n\nconst NavItem = ({ icon, label, isActive, onClick }) => (\n  <button\n    onClick={onClick}\n    style={{\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      width: \"100%\",\n      color: isActive ? \"#38bdf8\" : \"#9ca3af\",\n      background: \"none\",\n      border: \"none\",\n      cursor: \"pointer\",\n    }}\n  >\n    {icon}\n    <span style={{ fontSize: \"0.75rem\", marginTop: \"0.25rem\" }}>{label}</span>\n  </button>\n);\n\nconst BottomNav = ({ currentView, setView, onAddNew }) => {\n  const { width } = useWindowSize();\n  if (width >= 768) return null;\n  return (\n    <div\n      style={{\n        position: \"fixed\",\n        bottom: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: \"#1f2937\",\n        borderTop: \"1px solid #374151\",\n        zIndex: 10,\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-around\",\n          alignItems: \"center\",\n          height: \"4rem\",\n          maxWidth: \"448px\",\n          margin: \"0 auto\",\n        }}\n      >\n        <NavItem\n          icon={<Icon name=\"BarChart2\" />}\n          label=\"Dashboard\"\n          isActive={currentView === \"dashboard\"}\n          onClick={() => setView(\"dashboard\")}\n        />\n        <NavItem\n          icon={<Icon name=\"Briefcase\" />}\n          label=\"Historial\"\n          isActive={currentView === \"list\"}\n          onClick={() => setView(\"list\")}\n        />\n        <div style={{ position: \"relative\" }}>\n          <button\n            onClick={onAddNew}\n            style={{\n              ...styles.button,\n              ...styles.buttonPrimary,\n              borderRadius: \"9999px\",\n              padding: \"1rem\",\n              position: \"absolute\",\n              top: \"-2rem\",\n              left: \"50%\",\n              transform: \"translateX(-50%)\",\n            }}\n          >\n            <Icon name=\"PlusCircle\" style={{ width: \"28px\", height: \"28px\" }} />\n          </button>\n        </div>\n        <NavItem\n          icon={<Icon name=\"FileText\" />}\n          label=\"Reportes\"\n          isActive={currentView === \"reports\"}\n          onClick={() => setView(\"reports\")}\n        />\n        <NavItem\n          icon={<Icon name=\"BrainCircuit\" />}\n          label=\"Análisis\"\n          isActive={currentView === \"analysis\"}\n          onClick={() => setView(\"analysis\")}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst FormInput = ({ label, name, ...props }) => (\n  <div>\n    <label\n      htmlFor={name}\n      style={{\n        display: \"block\",\n        fontSize: \"0.875rem\",\n        fontWeight: \"500\",\n        marginBottom: \"0.25rem\",\n      }}\n      title={props.title}\n    >\n      {label}\n    </label>\n    <input id={name} name={name} {...props} style={styles.formInput} />\n  </div>\n);\nconst FormSelect = ({ label, name, options, ...props }) => (\n  <div>\n    <label\n      htmlFor={name}\n      style={{\n        display: \"block\",\n        fontSize: \"0.875rem\",\n        fontWeight: \"500\",\n        marginBottom: \"0.25rem\",\n      }}\n    >\n      {label}\n    </label>\n    <select id={name} name={name} {...props} style={styles.formSelect}>\n      {options.map((opt) => (\n        <option key={opt} value={opt}>\n          {opt}\n        </option>\n      ))}{\" \"}\n    </select>\n  </div>\n);\nconst StatCard = ({ icon, title, value }) => (\n  <div style={{ ...styles.card, ...styles.statCard }}>\n    <div style={styles.statIcon}>{icon}</div>\n    <div style={styles.statTextContainer}>\n      <h3 style={styles.statTitle}>{title}</h3>\n      <p style={styles.statValue}>{value}</p>\n    </div>\n  </div>\n);\nconst CalcResult = ({ label, value, isPositive, style = {} }) => (\n  <div\n    style={{\n      backgroundColor: \"#374151\",\n      padding: \"0.75rem\",\n      borderRadius: \"0.5rem\",\n    }}\n  >\n    <p style={styles.statTitle}>{label}</p>\n    <p\n      style={{\n        fontWeight: \"bold\",\n        fontSize: \"1.125rem\",\n        color: isPositive === false ? \"#f87171\" : \"white\",\n        ...style,\n      }}\n    >\n      {value}\n    </p>\n  </div>\n);\n\nconst OperationModal = ({ isOpen, onClose, onSave, operation }) => {\n  const [formData, setFormData] = useState({});\n  const { width } = useWindowSize();\n  const isMobile = width <= 768;\n  useEffect(() => {\n    const today = new Date();\n    const y = today.getFullYear();\n    const m = String(today.getMonth() + 1).padStart(2, \"0\");\n    const d = String(today.getDate()).padStart(2, \"0\");\n    if (operation) {\n      const opDate = operation.fecha?.toDate\n        ? operation.fecha.toDate()\n        : new Date(operation.fecha || today);\n      const opY = opDate.getFullYear();\n      const opM = String(opDate.getMonth() + 1).padStart(2, \"0\");\n      const opD = String(opDate.getDate()).padStart(2, \"0\");\n      setFormData({ ...operation, fecha: `${opY}-${opM}-${opD}` });\n    } else {\n      setFormData({\n        id: null,\n        fecha: `${y}-${m}-${d}`,\n        sucursal: \"Brasil\",\n        asignado: \"Charly\",\n        banco: \"Banesco\",\n        moneda: \"BRL\",\n        monto: \"\",\n        tasaCompra: \"\",\n        tasaVenta: \"\",\n        tasaCambio: \"\",\n      });\n    }\n  }, [operation]);\n\n  const calculations = useMemo(() => {\n    const monto = parseFloat(formData.monto) || 0;\n    const tasaCompra = parseFloat(formData.tasaCompra) || 0;\n    const tasaInterna = parseFloat(formData.tasaVenta) || 0;\n    const tasaCliente = parseFloat(formData.tasaCambio) || 0;\n    const moneda = formData.moneda;\n    const montoEntregarBs = monto * tasaCliente;\n    let montoRecibidoEnUSD = 0;\n    if (moneda === \"USD\") montoRecibidoEnUSD = monto;\n    else if (tasaCompra > 0) montoRecibidoEnUSD = monto / tasaCompra;\n    let costoEntregaEnUSD = 0;\n    if (tasaInterna > 0) costoEntregaEnUSD = montoEntregarBs / tasaInterna;\n    const comisionPagoMovilBs = formData.banco?.includes(\"Pago Movil\")\n      ? montoEntregarBs * PAGO_MOVIL_COMMISSION_RATE\n      : 0;\n    const comisionEnUSD =\n      tasaInterna > 0 ? comisionPagoMovilBs / tasaInterna : 0;\n    const gananciaNetaUSD =\n      montoRecibidoEnUSD - costoEntregaEnUSD - comisionEnUSD;\n    const montoEnUSD = montoRecibidoEnUSD;\n    let gananciaMia = 0,\n      gananciaAsignado = 0,\n      gananciaCharly = 0;\n    if (formData.sucursal === \"Brasil\" && formData.asignado !== \"Charly\") {\n      gananciaMia = gananciaNetaUSD * 0.5;\n      const gananciaSocio = gananciaNetaUSD * 0.5;\n      gananciaAsignado = gananciaSocio * (0.43 / 0.5);\n      gananciaCharly = gananciaSocio * (0.07 / 0.5);\n    } else {\n      gananciaMia = gananciaNetaUSD * 0.5;\n      gananciaAsignado = gananciaNetaUSD * 0.5;\n    }\n    return {\n      montoEnUSD,\n      montoEntregarBs,\n      comisionPagoMovilBs,\n      gananciaNetaUSD,\n      gananciaMia,\n      gananciaAsignado,\n      gananciaCharly,\n    };\n  }, [formData]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => {\n      const newState = { ...prev, [name]: value };\n      if (name === \"sucursal\") newState.asignado = ASIGNADOS[value]?.[0] || \"\";\n      return newState;\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // **REESCRITURA DE LA LÓGICA PARA EVITAR PERDER EL ID**\n    const dataToSubmit = {\n      ...formData,\n      ...calculations,\n      monto: parseFloat(formData.monto) || 0,\n      tasaCompra: parseFloat(formData.tasaCompra) || 0,\n      tasaCambio: parseFloat(formData.tasaCambio) || 0,\n      tasaVenta: parseFloat(formData.tasaVenta) || 0,\n      fecha: new Date(formData.fecha + \"T00:00:00\"),\n    };\n    // Aseguramos que el ID del 'operation' original se mantenga si estamos editando\n    if (operation && operation.id) {\n      dataToSubmit.id = operation.id;\n    }\n    onSave(dataToSubmit);\n  };\n\n  if (!isOpen) return null;\n  return (\n    <div style={styles.modalOverlay}>\n      <div style={styles.modalContent}>\n        <header style={styles.modalHeader}>\n          <h2 style={{ fontSize: \"1.25rem\", fontWeight: \"bold\" }}>\n            {operation ? \"Editar Operación\" : \"Nueva Operación\"}\n          </h2>\n          <button\n            onClick={onClose}\n            style={{\n              background: \"none\",\n              border: \"none\",\n              color: \"white\",\n              cursor: \"pointer\",\n            }}\n          >\n            <Icon name=\"X\" />\n          </button>\n        </header>\n        <form\n          onSubmit={handleSubmit}\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            flexGrow: 1,\n            overflow: \"hidden\",\n          }}\n        >\n          <div style={{ overflowY: \"auto\", flexGrow: 1, padding: \"1.5rem\" }}>\n            <div\n              style={{\n                ...styles.grid,\n                ...(isMobile ? styles.gridCols1 : styles.gridCols2),\n                marginBottom: \"1rem\",\n              }}\n            >\n              <FormInput\n                label=\"Fecha\"\n                type=\"date\"\n                name=\"fecha\"\n                value={formData.fecha || \"\"}\n                onChange={handleChange}\n                required\n              />\n              <FormSelect\n                label=\"Banco\"\n                name=\"banco\"\n                value={formData.banco || \"\"}\n                onChange={handleChange}\n                options={BANCOS}\n              />\n            </div>\n            <div\n              style={{\n                ...styles.grid,\n                ...(isMobile ? styles.gridCols1 : styles.gridCols2),\n                marginBottom: \"1rem\",\n              }}\n            >\n              <FormSelect\n                label=\"Sucursal\"\n                name=\"sucursal\"\n                value={formData.sucursal || \"\"}\n                onChange={handleChange}\n                options={SUCURSALES}\n              />\n              <FormSelect\n                label=\"Asignado\"\n                name=\"asignado\"\n                value={formData.asignado || \"\"}\n                onChange={handleChange}\n                options={ASIGNADOS[formData.sucursal] || []}\n              />\n            </div>\n            <div\n              style={{\n                backgroundColor: \"rgba(55, 65, 81, 0.5)\",\n                padding: \"1rem\",\n                borderRadius: \"0.5rem\",\n              }}\n            >\n              <h3\n                style={{\n                  fontSize: \"1.125rem\",\n                  fontWeight: \"600\",\n                  color: \"#7dd3fc\",\n                  marginBottom: \"1rem\",\n                }}\n              >\n                Monto y Tasas\n              </h3>\n              <div\n                style={{\n                  ...styles.grid,\n                  ...(isMobile ? styles.gridCols1 : styles.gridCols2),\n                  marginBottom: \"1rem\",\n                }}\n              >\n                <FormInput\n                  label=\"Monto Recibido\"\n                  type=\"number\"\n                  name=\"monto\"\n                  value={formData.monto || \"\"}\n                  onChange={handleChange}\n                  required\n                  placeholder=\"100.00\"\n                  step=\"0.01\"\n                />\n                <FormSelect\n                  label=\"Moneda\"\n                  name=\"moneda\"\n                  value={formData.moneda || \"\"}\n                  onChange={handleChange}\n                  options={MONEDAS}\n                />\n              </div>\n              <div\n                style={{\n                  ...styles.grid,\n                  ...(isMobile ? styles.gridCols1 : styles.gridCols3),\n                }}\n              >\n                <FormInput\n                  label=\"Tasa Cliente\"\n                  type=\"number\"\n                  name=\"tasaCambio\"\n                  value={formData.tasaCambio || \"\"}\n                  onChange={handleChange}\n                  placeholder=\"22.52\"\n                  step=\"0.0001\"\n                />\n                <FormInput\n                  label=\"Tasa Compra\"\n                  type=\"number\"\n                  name=\"tasaCompra\"\n                  value={formData.tasaCompra || \"\"}\n                  onChange={handleChange}\n                  placeholder=\"5.61\"\n                  step=\"0.0001\"\n                />\n                <FormInput\n                  label=\"Tasa Interna\"\n                  type=\"number\"\n                  name=\"tasaVenta\"\n                  value={formData.tasaVenta || \"\"}\n                  onChange={handleChange}\n                  placeholder=\"133\"\n                  step=\"0.0001\"\n                />\n              </div>\n            </div>\n            <div\n              style={{\n                backgroundColor: \"rgba(17, 24, 39, 0.5)\",\n                padding: \"1.5rem\",\n                marginTop: \"1rem\",\n              }}\n            >\n              <h3\n                style={{\n                  fontSize: \"1.125rem\",\n                  fontWeight: \"600\",\n                  color: \"#7dd3fc\",\n                  marginBottom: \"0.75rem\",\n                }}\n              >\n                Resultados\n              </h3>\n              <div\n                style={{\n                  ...styles.grid,\n                  ...(isMobile ? styles.gridCols1 : styles.gridCols2),\n                }}\n              >\n                <CalcResult\n                  label=\"Bolívares a Recibir\"\n                  value={formatCurrency(calculations.montoEntregarBs, \"VES\")}\n                  style={styles.textSky}\n                />\n                <CalcResult\n                  label=\"Ganancia Neta ($)\"\n                  value={formatCurrency(calculations.gananciaNetaUSD)}\n                  isPositive={calculations.gananciaNetaUSD >= 0}\n                />\n                <CalcResult\n                  label=\"Mi Ganancia\"\n                  value={formatCurrency(calculations.gananciaMia)}\n                  style={styles.textGreen}\n                />\n                <CalcResult\n                  label=\"Ganancia Asignado\"\n                  value={formatCurrency(calculations.gananciaAsignado)}\n                />\n                {formData.sucursal === \"Brasil\" &&\n                  formData.asignado !== \"Charly\" && (\n                    <CalcResult\n                      label=\"Ganancia Charly\"\n                      value={formatCurrency(calculations.gananciaCharly)}\n                    />\n                  )}\n              </div>\n            </div>\n          </div>\n          <footer style={styles.modalFooter}>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              style={{ ...styles.button, ...styles.buttonSecondary }}\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"submit\"\n              style={{ ...styles.button, ...styles.buttonPrimary }}\n            >\n              {operation ? \"Actualizar\" : \"Guardar\"}\n            </button>\n          </footer>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// --- COMPONENTE PRINCIPAL DE LA APP ---\nexport default function App() {\n  const [view, setView] = useState(\"list\"); // Iniciar en la lista para pruebas\n  const [operations, setOperations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [userId, setUserId] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingOperation, setEditingOperation] = useState(null);\n  const [analysisResult, setAnalysisResult] = useState(\"\");\n  const [isAnalysisLoading, setIsAnalysisLoading] = useState(false);\n\n  useEffect(() => {\n    document.body.style.margin = \"0\";\n  }, []);\n\n  useEffect(() => {\n    if (!firebaseInitialized) {\n      setLoading(false);\n      return;\n    }\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        setUserId(user.uid);\n      } else {\n        try {\n          if (\n            typeof __initial_auth_token !== \"undefined\" &&\n            __initial_auth_token\n          )\n            await signInWithCustomToken(auth, __initial_auth_token);\n          else await signInAnonymously(auth);\n        } catch (error) {\n          console.error(\"Anonymous sign-in failed\", error);\n        }\n      }\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (!isAuthReady || !userId) {\n      setLoading(false);\n      return;\n    }\n    setLoading(true);\n    const collectionPath = `/artifacts/${appId}/users/${userId}/operations`;\n    const q = query(collection(db, collectionPath));\n    const unsubscribe = onSnapshot(\n      q,\n      (querySnapshot) => {\n        const opsData = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n          fecha: doc.data().fecha?.toDate\n            ? doc.data().fecha.toDate()\n            : new Date(doc.data().fecha || new Date()),\n        }));\n        opsData.sort((a, b) => b.fecha - a.fecha);\n        setOperations(opsData);\n        setLoading(false);\n      },\n      (error) => {\n        console.error(\"Error fetching operations:\", error);\n        setLoading(false);\n      }\n    );\n    return () => unsubscribe();\n  }, [isAuthReady, userId]);\n\n  const handleSaveOperation = async (operationData) => {\n    console.log(\"Intentando guardar:\", operationData);\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      alert(\"Error de autenticación. Por favor, recargue la página.\");\n      return;\n    }\n\n    const collectionPath = `/artifacts/${appId}/users/${currentUser.uid}/operations`;\n    const { id, ...dataToSave } = operationData;\n\n    try {\n      if (id) {\n        console.log(`Actualizando documento con ID: ${id}`);\n        const docRef = doc(db, collectionPath, id);\n        await updateDoc(docRef, dataToSave);\n      } else {\n        console.log(\"Creando nuevo documento\");\n        await addDoc(collection(db, collectionPath), dataToSave);\n      }\n      setIsModalOpen(false);\n      setEditingOperation(null);\n    } catch (error) {\n      console.error(\"Error al guardar operación:\", error);\n      alert(`Error al guardar: ${error.message}`);\n    }\n  };\n\n  const handleDeleteOperation = async (idToDelete) => {\n    console.log(`Intentando borrar documento con ID: ${idToDelete}`);\n    const isConfirmed = window.confirm(\n      \"¿Estás seguro de que quieres eliminar esta operación?\"\n    );\n    if (!isConfirmed) return;\n\n    const currentUser = auth.currentUser;\n    if (!currentUser) {\n      alert(\"Error de autenticación. Por favor, recargue la página.\");\n      return;\n    }\n\n    const collectionPath = `/artifacts/${appId}/users/${currentUser.uid}/operations`;\n    try {\n      const docRef = doc(db, collectionPath, idToDelete);\n      await deleteDoc(docRef);\n      console.log(\"Documento borrado exitosamente.\");\n    } catch (error) {\n      console.error(\"Error al borrar operación:\", error);\n      alert(`Error al borrar: ${error.message}`);\n    }\n  };\n\n  const openModalForEdit = (op) => {\n    setEditingOperation(op);\n    setIsModalOpen(true);\n  };\n  const openModalForNew = () => {\n    setEditingOperation(null);\n    setIsModalOpen(true);\n  };\n\n  const myDailyStats = useMemo(() => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const todayOps = operations.filter(\n      (op) => new Date(op.fecha).setHours(0, 0, 0, 0) === today.getTime()\n    );\n    return {\n      myTotalGanancia: todayOps.reduce(\n        (acc, op) => acc + (Number(op.gananciaMia) || 0),\n        0\n      ),\n      totalMovidoUSD: todayOps.reduce(\n        (acc, op) => acc + (Number(op.montoEnUSD) || 0),\n        0\n      ),\n      count: todayOps.length,\n    };\n  }, [operations]);\n\n  if (!firebaseInitialized)\n    return (\n      <div\n        style={{\n          ...styles.appContainer,\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <p>Error: No se pudo conectar con la base de datos.</p>\n      </div>\n    );\n\n  return (\n    <div style={styles.appContainer}>\n      <div style={styles.container}>\n        <Header />\n        <main style={{ marginTop: \"1.5rem\" }}>\n          {view === \"dashboard\" && (\n            <DashboardView stats={myDailyStats} onAddNew={openModalForNew} />\n          )}\n          {view === \"list\" && (\n            <OperationsListView\n              operations={operations}\n              onEdit={openModalForEdit}\n              onDelete={handleDeleteOperation}\n              loading={loading}\n              onAddNew={openModalForNew}\n            />\n          )}\n          {view === \"reports\" && <ReportsView allOperations={operations} />}\n          {view === \"analysis\" && (\n            <AnalysisView\n              onGetAnalysis={() => {}}\n              result={analysisResult}\n              isLoading={isAnalysisLoading}\n            />\n          )}\n        </main>\n      </div>\n      <BottomNav\n        currentView={view}\n        setView={setView}\n        onAddNew={openModalForNew}\n      />\n      {isModalOpen && (\n        <OperationModal\n          isOpen={isModalOpen}\n          onClose={() => {\n            setIsModalOpen(false);\n            setEditingOperation(null);\n          }}\n          onSave={handleSaveOperation}\n          operation={editingOperation}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}